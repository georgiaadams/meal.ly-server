(this["webpackJsonpm3-client"]=this["webpackJsonpm3-client"]||[]).push([[0],{130:function(e,t,n){},131:function(e,t,n){},133:function(e,t,n){},134:function(e,t,n){},135:function(e,t,n){},136:function(e,t,n){},137:function(e,t,n){},138:function(e,t,n){},139:function(e,t,n){},140:function(e,t,n){},141:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){},146:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n.n(r),a=n(69),c=n.n(a),o=n(2),i=n(3),l=n(4),u=n(6),d=n(5),j=(n(75),n(7)),p=(n(76),n(0));var h=function(){return Object(p.jsxs)("div",{className:"main",children:[Object(p.jsx)("h1",{className:"welcome",children:"Welcome to meal.ly!"}),Object(p.jsx)("p",{children:"Help reduce food waste by connecting with local businesses, so their excess food can be shared not thrown away."}),Object(p.jsx)("img",{className:"food-icon",src:"https://res.cloudinary.com/skillbees/image/upload/v1615127939/Meal.ly/food-donation_jrc2lu.png",alt:"food-icon"}),Object(p.jsxs)("div",{className:"buttons",children:[Object(p.jsxs)(o.b,{to:"/login",children:[Object(p.jsx)("button",{className:"login-business-button",children:"Login for business"})," "]}),Object(p.jsx)("br",{}),Object(p.jsxs)(o.b,{to:"/signup",children:[Object(p.jsx)("button",{className:"signup-business-button",children:"Sign up for business"})," "]}),Object(p.jsx)("br",{}),Object(p.jsx)("hr",{className:"hr-home"}),Object(p.jsxs)(o.b,{to:"/user/login",children:[Object(p.jsx)("button",{className:"user-login-button",children:"Login for users"})," "]}),Object(p.jsx)("br",{}),Object(p.jsxs)(o.b,{to:"/user/signup",children:[Object(p.jsx)("button",{className:"user-signup-button",children:"Sign up for users"})," "]})]}),Object(p.jsx)("div",{className:"footer",children:Object(p.jsx)("p",{children:"Designed by Anna & Georgia"})})]})},f=n(8),b=n(14),m=n(26),O=n.n(m),g=new(function(){function e(){Object(i.a)(this,e),this.auth=O.a.create({baseURL:"https://meal-ly.herokuapp.com",withCredentials:!0})}return Object(l.a)(e,[{key:"userSignup",value:function(e,t,n,r){return this.auth.post("/auth/user/signup",{firstName:e,lastName:t,email:n,password:r}).then((function(e){return e.data})).catch((function(e){if(e.response)throw new Error(e.response.data.message);return new Error("Something went wrong")}))}},{key:"userLogin",value:function(e,t){return this.auth.post("/auth/user/login",{email:e,password:t}).then((function(e){return e.data})).catch((function(e){if(e.response)throw new Error(e.response.data.message);return new Error("Something went wrong")}))}},{key:"providerSignup",value:function(e,t,n,r,s){return this.auth.post("/auth/signup",{companyName:e,address:t,phoneNumber:n,email:r,password:s}).then((function(e){return e.data})).catch((function(e){if(e.response)throw new Error(e.response.data.message);return new Error("Something went wrong")}))}},{key:"providerLogin",value:function(e,t){return this.auth.post("/auth/login",{email:e,password:t}).then((function(e){return e.data})).catch((function(e){if(e.response)throw new Error(e.response.data.message);return new Error("Something went wrong")}))}},{key:"logout",value:function(){return this.auth.get("/auth/logout").then((function(e){return e.data}))}},{key:"me",value:function(){return this.auth.get("/auth/me").then((function(e){return e.data}))}}]),e}()),x=s.a.createContext(),v=x.Consumer,y=x.Provider,N=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={isLoggedIn:!1,isLoading:!0,user:null,isProviderUser:!1},e.userSignup=function(t,n,r,s){return g.userSignup(t,n,r,s).then((function(t){var n=!!t.companyName;e.setState({isLoggedIn:!0,user:t,isProviderUser:n})})).catch((function(t){e.setState({isLoggedIn:!1,user:null})}))},e.userLogin=function(t,n){return g.userLogin(t,n).then((function(t){var n=!!t.companyName;e.setState({isLoggedIn:!0,user:t,isProviderUser:n})})).catch((function(t){e.setState({isLoggedIn:!1,user:null})}))},e.providerSignup=function(t,n,r,s,a){return g.providerSignup(t,n,r,s,a).then((function(t){var n=!!t.companyName;e.setState({isLoggedIn:!0,user:t,isProviderUser:n})})).then((function(t){return e.setState({isLoggedIn:!0,user:t})})).catch((function(t){e.setState({isLoggedIn:!1,user:null})}))},e.providerLogin=function(t,n){return g.providerLogin(t,n).then((function(t){var n=!!t.companyName;e.setState({isLoggedIn:!0,user:t,isProviderUser:n})}))},e.logout=function(){g.logout().then((function(){return e.setState({isLoggedIn:!1,user:null,isProviderUser:!1})})).catch((function(e){return console.log(e)}))},e.updateUser=function(t){return e.setState({user:t})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;g.me().then((function(t){var n=!!t.companyName;e.setState({isLoggedIn:!0,user:t,isLoading:!1,isProviderUser:n})})).catch((function(t){return e.setState({isLoggedIn:!1,user:null,isLoading:!1,isProviderUser:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.isLoggedIn,n=e.isLoading,r=e.user,s=e.isProviderUser,a=this.userSignup,c=this.userLogin,o=this.providerSignup,i=this.providerLogin,l=this.updateUser,u=this.logout;return n?Object(p.jsx)("p",{children:"Loading"}):Object(p.jsx)(y,{value:{isLoggedIn:t,isLoading:n,user:r,isProviderUser:s,userSignup:a,userLogin:c,providerSignup:o,providerLogin:i,updateUser:l,logout:u},children:this.props.children})}}]),n}(s.a.Component),w=function(e){return function(t){return Object(p.jsx)(v,{children:function(n){var r=n.isLoggedIn,s=n.isLoading,a=n.user,c=n.isProviderUser,o=n.userSignup,i=n.userLogin,l=n.providerSignup,u=n.providerLogin,d=n.updateUser,j=n.logout;return Object(p.jsx)(e,Object(b.a)({isLoggedIn:r,isLoading:s,user:a,isProviderUser:c,userSignup:o,userLogin:i,providerSignup:l,providerLogin:u,updateUser:d,logout:j},t))}})}},k=(n(51),w(function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={companyName:"",address:"",phoneNumber:void 0,email:"",password:""},e.handleChange=function(t){var n=t.target,r=n.name,s=n.value;e.setState(Object(f.a)({},r,s))},e.handleFormSubmit=function(t){t.preventDefault();var n=e.state,r=n.companyName,s=n.address,a=n.phoneNumber,c=n.email,o=n.password;e.props.providerSignup(r,s,a,c,o)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.companyName,n=e.address,r=e.phoneNumber,s=e.email,a=e.password;return Object(p.jsxs)("div",{className:"signup",children:[Object(p.jsx)("h1",{children:"Sign Up"}),Object(p.jsxs)("form",{onSubmit:this.handleFormSubmit,children:[Object(p.jsx)("label",{}),Object(p.jsx)("input",{type:"text",name:"companyName",placeholder:"company name",value:t,onChange:this.handleChange}),Object(p.jsx)("br",{}),Object(p.jsx)("label",{}),Object(p.jsx)("input",{type:"number",name:"phoneNumber",placeholder:"phone number",value:r,onChange:this.handleChange}),Object(p.jsx)("br",{}),Object(p.jsx)("label",{}),Object(p.jsx)("input",{type:"email",name:"email",placeholder:"email",value:s,onChange:this.handleChange}),Object(p.jsx)("br",{}),Object(p.jsx)("label",{}),Object(p.jsx)("input",{type:"password",name:"password",placeholder:"password",value:a,onChange:this.handleChange}),Object(p.jsx)("br",{}),Object(p.jsx)("label",{}),Object(p.jsx)("input",{style:{height:"60px"},className:"signup-address",type:"text",name:"address",placeholder:"Enter full address: Street,  City,  Postcode",value:n,onChange:this.handleChange}),Object(p.jsx)("br",{}),Object(p.jsx)("button",{className:"signup-btn",type:"submit",value:"Signup",children:"Signup"})]}),Object(p.jsx)("p",{children:"Already have account?"}),Object(p.jsxs)(o.b,{to:"/login",children:[" ",Object(p.jsx)("button",{className:"login-btn",children:"Login"})]})]})}}]),n}(r.Component))),C=w(function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={firstName:"",lastName:"",email:"",password:""},e.handleFormSubmit=function(t){t.preventDefault();var n=e.state,r=n.firstName,s=n.lastName,a=n.email,c=n.password;e.props.userSignup(r,s,a,c)},e.handleChange=function(t){var n=t.target,r=n.name,s=n.value;e.setState(Object(f.a)({},r,s))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.firstName,n=e.lastName,r=e.email,s=e.password;return Object(p.jsxs)("div",{className:"signup",children:[Object(p.jsx)("h1",{children:"User Signup"}),Object(p.jsxs)("form",{onSubmit:this.handleFormSubmit,children:[Object(p.jsx)("label",{}),Object(p.jsx)("input",{type:"text",name:"firstName",placeholder:"firstname",value:t,onChange:this.handleChange}),Object(p.jsx)("br",{}),Object(p.jsx)("label",{}),Object(p.jsx)("input",{type:"text",name:"lastName",placeholder:"lastname",value:n,onChange:this.handleChange}),Object(p.jsx)("br",{}),Object(p.jsx)("label",{}),Object(p.jsx)("input",{type:"email",name:"email",placeholder:"email",value:r,onChange:this.handleChange}),Object(p.jsx)("br",{}),Object(p.jsx)("label",{}),Object(p.jsx)("input",{type:"password",name:"password",placeholder:"password",value:s,onChange:this.handleChange}),Object(p.jsx)("br",{}),Object(p.jsx)("button",{className:"signup-btn",type:"submit",value:"Signup",children:"Signup"})]}),Object(p.jsx)("p",{children:"Already have account?"}),Object(p.jsxs)(o.b,{to:"/user/login",children:[" ",Object(p.jsx)("button",{className:"login-btn",children:"Login"})]})]})}}]),n}(r.Component)),S=w(function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={email:"",password:"",hasError:!1,errorInfo:""},e.handleFormSubmit=function(t){t.preventDefault();var n=e.state,r=n.email,s=n.password;e.props.providerLogin(r,s).catch((function(t){e.setState({hasError:!0,errorInfo:t.message})}))},e.handleChange=function(t){var n=t.target,r=n.name,s=n.value;e.setState(Object(f.a)({},r,s))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password,r=e.hasError,s=e.errorInfo;return Object(p.jsxs)("div",{className:"login",children:[Object(p.jsx)("h1",{children:"Login"}),Object(p.jsxs)("form",{onSubmit:this.handleFormSubmit,children:[Object(p.jsx)("label",{}),Object(p.jsx)("input",{type:"email",name:"email",placeholder:"email",value:t,onChange:this.handleChange}),Object(p.jsx)("br",{}),Object(p.jsx)("label",{}),Object(p.jsx)("input",{type:"password",name:"password",placeholder:"password",value:n,onChange:this.handleChange}),Object(p.jsx)("br",{}),Object(p.jsx)("button",{type:"submit",value:"Login",children:"Login"})]}),r&&Object(p.jsx)("p",{children:s})]})}}]),n}(r.Component)),L=(n(99),w(function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={email:"",password:"",hasError:!1,errorInfo:""},e.handleFormSubmit=function(t){t.preventDefault();var n=e.state,r=n.email,s=n.password;e.props.userLogin(r,s).catch((function(t){e.setState({hasError:!0,errorInfo:t.message})}))},e.handleChange=function(t){var n=t.target,r=n.name,s=n.value;e.setState(Object(f.a)({},r,s))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password,r=e.hasError,s=e.errorInfo;return Object(p.jsxs)("div",{className:"login",children:[Object(p.jsx)("h1",{children:"User Login"}),Object(p.jsxs)("form",{onSubmit:this.handleFormSubmit,children:[Object(p.jsx)("label",{}),Object(p.jsx)("input",{type:"email",name:"email",placeholder:"email",value:t,onChange:this.handleChange}),Object(p.jsx)("br",{}),Object(p.jsx)("label",{}),Object(p.jsx)("input",{type:"password",name:"password",placeholder:"password",value:n,onChange:this.handleChange}),Object(p.jsx)("br",{}),Object(p.jsx)("button",{type:"submit",value:"Login",children:"Login"})]}),r&&Object(p.jsx)("p",{children:s})]})}}]),n}(r.Component))),M=n(27),_=new function e(){var t=this;Object(i.a)(this,e),this.getOffersUser=function(){return t.api.get("/user/offers/status/new").then((function(e){return e.data}))},this.getOneOfferUser=function(e){return t.api.get("user/offers/".concat(e)).then((function(e){return e.data}))},this.getPendingOffersUser=function(){return t.api.get("/user/offers/status/ready-requested").then((function(e){return e.data}))},this.getCompletedOffersUser=function(){return t.api.get("/user/offers/status/completed").then((function(e){return e.data}))},this.requestOffer=function(e){var n=e.offerId,r=e.comments,s=e.pickupSlot;return t.api.put("/user/offers/status/update",{offerId:n,comments:r,pickupSlot:s}).then((function(e){return e.data}))},this.completeOffer=function(e){var n=e.offerId;return t.api.put("/user/offers/status/completed",{offerId:n}).then((function(e){return e.data}))},this.getProfile=function(){return t.api.get("/user/profile").then((function(e){return e.data}))},this.editProfile=function(e){var n=e.firstName,r=e.lastName,s=e.email;return t.api.put("/user/profile/edit",{firstName:n,lastName:r,email:s}).then((function(e){return e.data}))},this.api=O.a.create({baseURL:"https://meal-ly.herokuapp.com/api",withCredentials:!0})},q=(n(52),n(32)),P=n.n(q),A=P()("https://meal-ly.herokuapp.com"),I=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={allOffers:[]},e.getAllNewOffers=function(){_.getOffersUser().then((function(t){e.setState({allOffers:t})})).catch((function(e){return console.log(e)}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.getAllNewOffers(),A.on("newOffer",(function(t){e.setState({allOffers:[t].concat(Object(M.a)(e.state.allOffers))})})),A.on("offerEdited",(function(t){var n=Object(M.a)(e.state.allOffers),r=n.indexOf((function(e){return e._id===t._id}));r&&(n.splice(r,1,t),e.setState({allOffers:n}))}))}},{key:"render",value:function(){var e=this.state.allOffers;return Object(p.jsx)("div",{children:e.slice(0,2).map((function(e){return Object(p.jsxs)("div",{className:"offer-card",children:[Object(p.jsxs)("div",{className:"offer-info",children:[Object(p.jsxs)("p",{children:[Object(p.jsx)("img",{className:"offer-icon",src:"https://res.cloudinary.com/skillbees/image/upload/v1615452522/Meal.ly/food-stall_irwffa.png"}),"Company: ",e.companyName]}),Object(p.jsxs)("p",{children:[Object(p.jsx)("img",{className:"offer-icon",src:"https://res.cloudinary.com/skillbees/image/upload/v1615134623/Meal.ly/healthy-food_jf07wc.png"}),"Content: ",e.content]}),Object(p.jsxs)("p",{children:[Object(p.jsx)("img",{className:"offer-icon",src:"https://res.cloudinary.com/skillbees/image/upload/v1615452522/Meal.ly/box_ifs7rr.png"}),"Quantity: ",e.quantity]})]}),Object(p.jsx)("div",{children:Object(p.jsx)(o.b,{to:"/user/offers/".concat(e._id),children:Object(p.jsx)("img",{width:"80px",src:e.image,alt:"offer-img"})})})]},e._id)}))})}}]),n}(r.Component),U=n(16),D=n.n(U),E=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={pendingOffers:[]},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;_.getPendingOffersUser().then((function(t){var n=t.requested;e.setState({pendingOffers:n})}))}},{key:"render",value:function(){var e=this.state.pendingOffers;return Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:"Your Requested Offers"}),e.map((function(e){return Object(p.jsxs)("div",{children:[Object(p.jsxs)(o.b,{to:"/user/offers/".concat(e._id),children:[Object(p.jsx)("p",{children:e.companyName})," "]}),Object(p.jsx)("p",{children:e.content}),Object(p.jsx)("p",{children:e.pickupSlot}),Object(p.jsx)("p",{children:D()(e.date).format("LL")})]})}))]})}}]),n}(r.Component);n(130),n(67);var R=function(){return Object(p.jsxs)("div",{className:"user-navbar",children:[Object(p.jsx)(o.b,{to:"/user/offers",children:Object(p.jsx)("p",{children:"All offers"})}),Object(p.jsx)(o.b,{to:"/user/offers/pending",children:Object(p.jsx)("p",{children:"Your requests"})}),Object(p.jsx)(o.b,{to:"/user/offers/completed",children:Object(p.jsx)("p",{children:"Completed Offers"})}),Object(p.jsx)(o.b,{to:"/user/profile",children:Object(p.jsx)("p",{children:"My profile"})})]})};var F=w((function(){return Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"homepage",children:[Object(p.jsxs)("h2",{children:[Object(p.jsx)("img",{className:"bowl-icon",src:"https://res.cloudinary.com/skillbees/image/upload/v1615134623/Meal.ly/healthy-food_jf07wc.png"})," Latest Offers"]}),Object(p.jsx)(o.b,{to:"/user/offers",children:Object(p.jsx)("button",{className:"all-new-offers",children:"See all new offers"})}),Object(p.jsx)(I,{}),Object(p.jsx)(E,{}),Object(p.jsx)(o.b,{to:"/user/offers/pending",children:Object(p.jsx)("button",{className:"see-all-requests",children:"See all requests"})})]}),Object(p.jsx)(R,{})]})})),Y=(n(131),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={completedOffers:[]},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;_.getCompletedOffersUser().then((function(t){console.log(t);var n=t.filter((function(e){return"completed"===e.status}));e.setState({completedOffers:n})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.state.completedOffers;return Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"user-completed-offers",children:[Object(p.jsx)("h2",{children:"Your Completed Orders"}),e.map((function(e){return Object(p.jsxs)("div",{children:[Object(p.jsxs)("p",{children:[Object(p.jsx)("img",{className:"offer-icon",src:"https://res.cloudinary.com/skillbees/image/upload/v1615452522/Meal.ly/food-stall_irwffa.png",alt:"company-img"})," ","",e.companyName]}),Object(p.jsxs)("p",{children:[Object(p.jsx)("img",{className:"offer-icon",src:"https://res.cloudinary.com/skillbees/image/upload/v1615134623/Meal.ly/healthy-food_jf07wc.png",alt:"food-img"})," ",e.content]}),Object(p.jsxs)("p",{children:[Object(p.jsx)("img",{className:"offer-icon",src:"https://res.cloudinary.com/skillbees/image/upload/v1615134623/Meal.ly/calendar_hhbgvr.png",alt:"calendar-icon"})," ",D()(e.date).format("LL")]}),Object(p.jsxs)("p",{children:[Object(p.jsx)("img",{className:"offer-icon",src:"https://res.cloudinary.com/skillbees/image/upload/v1615134623/Meal.ly/charging-circle_p7sls6.png",alt:"status-icon"})," ",e.status]}),Object(p.jsx)("hr",{})]},e._id)}))]}),Object(p.jsx)(R,{})]})}}]),n}(r.Component)),H=n(10),W=n.n(H),z=n(17),J=(n(133),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={username:"",comments:""},e.handleInput=function(t){var n=t.target,r=n.value,s=n.name;e.setState(Object(f.a)({},s,r))},e.handleFormSubmit=function(){var t=Object(z.a)(W.a.mark((function t(n){var r,s,a,c,o,i;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r=e.state,s=r.username,a=r.comments,console.log(e.props),c=e.props.match.params.id,t.next=6,_.requestOffer({offerId:c,comments:a,username:s});case 6:o=t.sent,i=o.companyName,e.props.history.push("/user/offers/pending"),A.emit("requestOffer",{companyName:i}),e.setState({username:"",comments:""});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.comments;return Object(p.jsx)("div",{className:"pickup-form",children:Object(p.jsxs)("form",{className:"user-form",onSubmit:this.handleFormSubmit,children:[Object(p.jsx)("label",{children:"Name"}),Object(p.jsx)("h5",{children:"Please let us know who will come to collect \ud83d\ude0a"}),Object(p.jsx)("input",{style:{height:"25px"},type:"text",name:"username",value:t,onChange:this.handleInput}),Object(p.jsx)("br",{}),Object(p.jsx)("label",{children:"Comments"}),Object(p.jsx)("input",{type:"text",name:"comments",value:n,onChange:this.handleInput,placeholder:"Leave any comments here"}),Object(p.jsx)("br",{}),Object(p.jsx)("button",{children:"Request"})]})})}}]),n}(s.a.Component)),T=Object(j.g)(J);n(134),n(135);var B=function(e){var t=e;return Object(p.jsx)("div",{className:"location",children:Object(p.jsx)(o.b,{to:{pathname:function(e){var t=e.address;return"".concat("https://www.google.com/maps/place/").concat(t)}(t)},target:"_blank",children:Object(p.jsx)("button",{children:"Directions"})})})},G=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={oneOffer:[]},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;_.getOneOfferUser(t).then((function(t){console.log(t),e.setState({oneOffer:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.state.oneOffer;return Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"offer-details",children:[Object(p.jsx)("div",{className:"offer-header",children:Object(p.jsx)("h2",{children:"Offer Details"})}),Object(p.jsx)("img",{width:"150px",style:{borderRadius:"15px"},src:e.image,alt:"offer-img"}),Object(p.jsxs)("div",{className:"offer-info",children:[Object(p.jsxs)("p",{children:[Object(p.jsx)("img",{className:"offer-icon",src:"https://res.cloudinary.com/skillbees/image/upload/v1615452522/Meal.ly/food-stall_irwffa.png",alt:"company-img"})," ",e.companyName]}),Object(p.jsxs)("p",{children:[Object(p.jsx)("img",{className:"offer-icon",src:"https://res.cloudinary.com/skillbees/image/upload/v1615134623/Meal.ly/healthy-food_jf07wc.png",alt:"food-img"})," ",e.content]}),Object(p.jsxs)("p",{children:[Object(p.jsx)("img",{className:"offer-icon",src:"https://res.cloudinary.com/skillbees/image/upload/v1615452522/Meal.ly/box_ifs7rr.png",alt:"quantity-img"})," ",e.quantity]}),Object(p.jsxs)("p",{children:[Object(p.jsx)("img",{className:"offer-icon",src:"https://res.cloudinary.com/skillbees/image/upload/v1615134623/Meal.ly/clock_snwysd.png",alt:"time-img"})," ",e.pickupSlot]}),Object(p.jsxs)("p",{children:[Object(p.jsx)("img",{className:"offer-icon",src:"https://res.cloudinary.com/skillbees/image/upload/v1615455306/Meal.ly/placeholder_lczeom.png"}),e.address]}),Object(p.jsx)(B,{address:e.address})]}),Object(p.jsx)("hr",{}),Object(p.jsx)("h4",{children:"Pickup Request"}),"new"!==e.status?Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"requested-message",children:[Object(p.jsx)("img",{style:{width:"40px"},src:"https://res.cloudinary.com/skillbees/image/upload/v1615455081/Meal.ly/checked_ejbio8.png",alt:"waiting-img"}),Object(p.jsx)("p",{children:"You have requested this offer already"})]})}):Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(T,{})})]}),Object(p.jsx)(R,{})]})}}]),n}(r.Component),Q=(n(136),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={allOffers:[]},e.getAllOffers=function(){_.getOffersUser().then((function(t){e.setState({allOffers:t})})).catch((function(e){return console.log(e)}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.getAllOffers(),A.on("newOffer",(function(t){e.setState({allOffers:[t].concat(Object(M.a)(e.state.allOffers))})})),A.on("offerEdited",(function(t){var n=Object(M.a)(e.state.allOffers),r=n.indexOf((function(e){return e._id===t._id}));r&&(n.splice(r,1,t),e.setState({allOffers:n}))}))}},{key:"render",value:function(){var e=this.state.allOffers;return console.log(e),Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"all-offers",children:[Object(p.jsxs)("h2",{children:[Object(p.jsx)("img",{className:"bowl-icon",src:"https://res.cloudinary.com/skillbees/image/upload/v1615134623/Meal.ly/healthy-food_jf07wc.png"})," ","All Offers"]}),e.map((function(e){return Object(p.jsxs)("div",{className:"offer-card",children:[Object(p.jsxs)("div",{className:"offer-info",children:[Object(p.jsxs)("p",{children:[Object(p.jsx)("img",{className:"offer-icon",src:"https://res.cloudinary.com/skillbees/image/upload/v1615452522/Meal.ly/food-stall_irwffa.png"}),e.companyName]}),Object(p.jsxs)("p",{children:[Object(p.jsx)("img",{className:"offer-icon",src:"https://res.cloudinary.com/skillbees/image/upload/v1615452522/Meal.ly/box_ifs7rr.png"}),e.quantity]}),Object(p.jsxs)("p",{children:[Object(p.jsx)("img",{className:"offer-icon",src:"https://res.cloudinary.com/skillbees/image/upload/v1615134623/Meal.ly/healthy-food_jf07wc.png"})," ",e.content]})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("img",{width:"80px",src:e.image,alt:"offerimg"}),Object(p.jsx)(o.b,{to:"/user/offers/".concat(e._id),children:Object(p.jsx)("button",{className:"seemore",children:"See more"})})]})]},e._id)}))]}),Object(p.jsx)(R,{})]})}}]),n}(s.a.Component)),V=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(p.jsx)("div",{children:Object(p.jsx)("button",{onClick:this.props.handleClick,children:"Collected"})})}}]),n}(s.a.Component),K=Object(j.g)(V),X=(n(137),w(function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={readyOffers:[],requestedOffers:[],showingReady:!0},e.getOffers=function(){_.getPendingOffersUser().then((function(t){var n=t.ready,r=t.requested;e.setState({readyOffers:n,requestedOffers:r})})).catch((function(e){return console.log(e)}))},e.handleClick=function(){var t=Object(z.a)(W.a.mark((function t(n){return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.completeOffer({offerId:n});case 2:A.emit("collectOffer",{message:"User has collected"}),e.props.history.push("/user/offers/completed");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderReadyOrRequestedTitle=function(){return e.state.showingReady?"Ready":"Requested"},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.getOffers(),A.on("offerAccepted",(function(t){e.getOffers()}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.readyOffers,r=t.requestedOffers,s=t.showingReady;return Object(p.jsxs)("div",{className:"requested-offers",children:[Object(p.jsx)("h2",{children:this.renderReadyOrRequestedTitle()}),Object(p.jsx)("button",{style:{backgroundColor:"#82aba1",height:"38px",width:"100px"},onClick:function(){return e.setState({showingReady:!s})},children:s?"Show Requested":"Show Ready"}),(s?n:r).map((function(t){return Object(p.jsxs)("div",{style:{textAlign:"center"},children:[Object(p.jsxs)("p",{children:[Object(p.jsx)("img",{className:"offer-icon",src:"https://res.cloudinary.com/skillbees/image/upload/v1615452522/Meal.ly/food-stall_irwffa.png",alt:"company-img"})," ",Object(p.jsx)(o.b,{style:{color:"#331832"},to:"/user/offers/".concat(t._id),children:t.companyName})]}),Object(p.jsxs)("p",{children:[Object(p.jsx)("img",{className:"offer-icon",src:"https://res.cloudinary.com/skillbees/image/upload/v1615134623/Meal.ly/clock_snwysd.png",alt:"clock-icon"})," ",t.pickupSlot]}),Object(p.jsxs)("p",{children:[" ",Object(p.jsx)("img",{className:"offer-icon",src:"https://res.cloudinary.com/skillbees/image/upload/v1615134623/Meal.ly/calendar_hhbgvr.png",alt:"calendar-icon"})," ",D()(t.date).format("LL")]}),Object(p.jsxs)("p",{children:[Object(p.jsx)("img",{className:"offer-icon",src:"https://res.cloudinary.com/skillbees/image/upload/v1615455306/Meal.ly/placeholder_lczeom.png",alt:"address-icon"}),t.address]}),t.address&&Object(p.jsx)(B,{address:t.address}),s&&Object(p.jsx)(K,{handleClick:function(){return e.handleClick(t._id)}})]},t._id)})),Object(p.jsx)(R,{})]})}}]),n}(r.Component))),Z=(n(138),w((function(e){var t=e.user;return Object(p.jsxs)("div",{className:"profile-page",children:[Object(p.jsx)("h2",{children:"My Profile"}),Object(p.jsx)("img",{width:"70px",src:t.image,alt:"userImg"}),Object(p.jsxs)("p",{children:["Name: ",t.firstName," ",t.lastName]}),Object(p.jsxs)("p",{children:["Email: ",t.email]}),Object(p.jsx)(o.b,{to:"/user/profile/edit",children:Object(p.jsx)("button",{className:"edit-btn",children:"Edit Details"})}),Object(p.jsx)("br",{}),Object(p.jsx)(R,{})]})}))),$=(n(68),w(function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={firstName:"",lastName:"",email:""},e.handleFormSubmit=function(t){t.preventDefault();var n=e.state,r=n.firstName,s=n.lastName,a=n.email;_.editProfile({firstName:r,lastName:s,email:a}).then((function(t){e.props.updateUser(t),e.props.history.push("/user/profile")}))},e.handleChange=function(t){var n=t.target,r=n.name,s=n.value;e.setState(Object(f.a)({},r,s))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;(function(){var t=Object(z.a)(W.a.mark((function t(){var n;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.getProfile();case 2:n=t.sent,e.setState(Object(b.a)({},n));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}},{key:"render",value:function(){var e=this.state,t=e.firstName,n=e.lastName,r=e.email;return Object(p.jsxs)("div",{className:"edit-profile",children:[Object(p.jsx)("h2",{children:"Edit your profile"}),Object(p.jsx)("br",{}),Object(p.jsxs)("form",{onSubmit:this.handleFormSubmit,children:[Object(p.jsx)("label",{children:"Firstname"}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"text",name:"firstName",value:t,onChange:this.handleChange}),Object(p.jsx)("br",{}),Object(p.jsx)("label",{children:"Lastname"}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"text",name:"lastName",value:n,onChange:this.handleChange}),Object(p.jsx)("br",{}),Object(p.jsx)("label",{children:"Email"}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"text",name:"email",value:r,onChange:this.handleChange}),Object(p.jsx)("br",{}),Object(p.jsx)("button",{type:"submit",children:"Confirm Changes"})]})]})}}]),n}(r.Component))),ee=(n(139),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(p.jsxs)("div",{className:"bottom-navbar",children:[Object(p.jsx)(o.b,{to:"/provider/offers",children:Object(p.jsx)("p",{children:"My offers"})}),Object(p.jsx)(o.b,{to:"/provider/offers/new",children:Object(p.jsx)("p",{children:"New offer"})}),Object(p.jsx)(o.b,{to:"/provider/myprofile",children:Object(p.jsx)("p",{children:"My profile"})}),Object(p.jsx)(o.b,{to:"/provider/homepage",children:Object(p.jsx)("p",{children:"Home"})})]})}}]),n}(r.Component)),te=new function e(){var t=this;Object(i.a)(this,e),this.getAllOffersProvider=function(){return t.api.get("/provider/offers").then((function(e){return e.data}))},this.getOneOfferProvider=function(e){return t.api.get("/provider/offers/".concat(e)).then((function(e){return e.data}))},this.createOffer=function(e,n,r,s,a,c,o){var i={content:e,quantity:n,date:r,pickupSlot:s,companyName:a,address:c,image:o};return t.api.post("/provider/offers",i)},this.editOffer=function(e,n){var r=n.companyName,s=n.content,a=n.quantity,c=n.date,o=n.pickupSlot,i=n.address;return t.api.put("/provider/offers/".concat(e),{companyName:r,content:s,quantity:a,date:c,pickupSlot:o,address:i}).then((function(e){return e.data}))},this.deleteOffer=function(e){return t.api.delete("/provider/offers/".concat(e)).then((function(e){return e.data}))},this.acceptOffer=function(e){var n=e.offerId;return t.api.put("/provider/offers/status/update",{offerId:n}).then((function(e){return e.data}))},this.getProfile=function(){return t.api.get("/provider/myprofile").then((function(e){return e.data}))},this.editProfile=function(e){var n=e.companyName,r=e.email,s=e.address,a=e.phoneNumber,c=e.image;return t.api.put("/provider/myprofile/edit",{companyName:n,email:r,address:s,phoneNumber:a,image:c}).then((function(e){return e.data}))},this.api=O.a.create({baseURL:"https://meal-ly.herokuapp.com/api",withCredentials:!0})},ne=w(function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={requestedOffers:[]},e.getRequestedOffers=function(){te.getAllOffersProvider().then((function(t){var n=t.filter((function(e){return"requested"===e.status}));console.log(n),e.setState({requestedOffers:n})})).catch((function(e){return console.log(e)}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=P()("https://meal-ly.herokuapp.com");this.getRequestedOffers(),t.on("offerRequested",(function(t){var n=e.props.user.companyName;t.companyName===n&&e.getRequestedOffers()}))}},{key:"render",value:function(){var e=this.state.requestedOffers;return Object(p.jsxs)("div",{className:"provider-home",children:[Object(p.jsx)("img",{className:"care-icon",src:"https://res.cloudinary.com/skillbees/image/upload/v1615127951/Meal.ly/love_louyw3.png",alt:"care-icon"}),Object(p.jsx)(o.b,{to:"/provider/offers/new",children:Object(p.jsx)("button",{className:"add-new-offer",children:"Add a new offer"})}),Object(p.jsx)("h3",{style:{color:"white"},children:"Your requested offers:"}),e.map((function(e){return Object(p.jsxs)("div",{className:"provider-hp-offers",children:[Object(p.jsxs)("p",{children:[Object(p.jsx)("img",{className:"offer-icon",src:"https://res.cloudinary.com/skillbees/image/upload/v1615134623/Meal.ly/healthy-food_jf07wc.png",alt:"food-img"})," ",e.content]}),Object(p.jsxs)("p",{children:[Object(p.jsx)("img",{className:"offer-icon",src:"https://res.cloudinary.com/skillbees/image/upload/v1615325955/Meal.ly/messenger_c959rr.png",alt:"messaging-img"})," ","Message: ",e.comments]}),Object(p.jsxs)("p",{children:[Object(p.jsx)("img",{className:"offer-icon",src:"https://res.cloudinary.com/skillbees/image/upload/v1615134623/Meal.ly/clock_snwysd.png",alt:"time-img"})," ","Pickup time: ",e.pickupSlot]}),Object(p.jsx)(o.b,{to:"/provider/offers/".concat(e._id),children:Object(p.jsxs)("p",{style:{color:"white"},children:["Accept pickup"," ",Object(p.jsx)("img",{className:"offer-icon",src:"https://res.cloudinary.com/skillbees/image/upload/v1615381281/Meal.ly/confirmation_vucm8r.png",alt:"confirm-img"})]})})]},e._id)})),Object(p.jsx)(o.b,{to:"/provider/offers",children:Object(p.jsx)("button",{className:"offers-panel-button",children:"All my offers"})}),Object(p.jsx)(ee,{})]})}}]),n}(s.a.Component)),re=(n(140),w(function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={companyName:"",content:"",quantity:"",date:new Date,pickupSlot:"",address:""},e.handleFormSubmit=function(t){t.preventDefault();var n=e.state,r=n.companyName,s=n.content,a=n.quantity,c=n.date,o=n.pickupSlot,i=n.address,l=e.props.match.params.id;te.editOffer(l,{companyName:r,content:s,quantity:a,date:c,pickupSlot:o,address:i}).then((function(t){e.setState({companyName:"",content:"",quantity:"",date:new Date,pickupSlot:"",address:""}),A.emit("editOffer",t),e.props.history.push("/provider/offers")})).catch((function(e){return console.log(e)}))},e.handleChange=function(t){var n=t.target,r=n.name,s=n.value;e.setState(Object(f.a)({},r,s))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;te.getOneOfferProvider(t).then((function(t){e.setState(Object(b.a)({},t))})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.state,t=e.companyName,n=e.content,r=e.quantity,s=e.date,a=e.pickupSlot,c=e.address;return Object(p.jsxs)("div",{className:"edit-offer-form",children:[Object(p.jsx)("h2",{className:"edit-offer-h2",children:"Edit your offer"}),Object(p.jsxs)("form",{className:"edit-offer",onSubmit:this.handleFormSubmit,children:[Object(p.jsx)("label",{children:"Name of your company:"}),Object(p.jsx)("input",{type:"text",name:"companyName",value:t,onChange:this.handleChange}),Object(p.jsx)("br",{}),Object(p.jsx)("label",{children:"What are you giving away?"}),Object(p.jsx)("input",{type:"text",name:"content",value:n,onChange:this.handleChange}),Object(p.jsx)("br",{}),Object(p.jsx)("label",{children:"Please specify the amount:"}),Object(p.jsx)("input",{type:"text",name:"quantity",value:r,onChange:this.handleChange}),Object(p.jsx)("br",{}),Object(p.jsx)("label",{children:"Address:"}),Object(p.jsx)("input",{type:"text",name:"address",value:c,onChange:this.handleChange}),Object(p.jsx)("br",{}),Object(p.jsx)("label",{children:"Pickup day:"}),Object(p.jsx)("input",{type:"date",name:"date",value:s,onChange:this.handleChange}),Object(p.jsx)("br",{}),Object(p.jsx)("label",{children:"Pickup Slot"}),Object(p.jsxs)("select",{type:"text",name:"pickupSlot",value:a,onChange:this.handleChange,children:[Object(p.jsx)("option",{}),Object(p.jsx)("option",{children:"Morning: 9am-12pm"}),Object(p.jsx)("option",{children:"Afternoon: 12pm-4pm"}),Object(p.jsx)("option",{children:"Evening: 4pm-8pm"}),Object(p.jsx)("option",{children:"Night: 8pm-11.30pm"})]}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"submit",value:"Submit"})]}),Object(p.jsx)(ee,{})]})}}]),n}(r.Component))),se=(n(141),w(function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={companyName:"",content:"",quantity:"",date:new Date,pickupSlot:"",address:""},e.handleFormSubmit=function(t){t.preventDefault();var n=e.state,r=n.companyName,s=n.content,a=n.quantity,c=n.date,o=n.pickupSlot,i=n.address;te.createOffer(s,a,c,o,r,i).then((function(t){e.setState({companyName:"",content:"",quantity:"",date:new Date,pickupSlot:"",address:""}),A.emit("createOffer",t.data),e.props.history.push("/provider/offers")})).catch((function(e){return console.log(e)}))},e.handleChange=function(t){var n=t.target,r=n.name,s=n.value;e.setState(Object(f.a)({},r,s))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.user;console.log(e);var t=this.state,n=t.companyName,r=t.content,s=t.quantity,a=t.date,c=t.pickupSlot,o=t.address;return Object(p.jsxs)("div",{className:"new-offer-form",children:[Object(p.jsxs)("form",{className:"new-offer",onSubmit:this.handleFormSubmit,children:[Object(p.jsx)("label",{children:"Name of your company:"}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"text",name:"companyName",value:n,onChange:this.handleChange}),Object(p.jsx)("br",{}),Object(p.jsx)("label",{children:"What are you giving away?"}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"text",name:"content",value:r,onChange:this.handleChange}),Object(p.jsx)("br",{}),Object(p.jsx)("label",{children:"Please specify the amount:"}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"text",name:"quantity",value:s,onChange:this.handleChange}),Object(p.jsx)("br",{}),Object(p.jsx)("label",{children:"Address:"}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"text",name:"address",value:o,onChange:this.handleChange}),Object(p.jsx)("br",{}),Object(p.jsx)("label",{children:"Pickup day:"}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"date",name:"date",value:a,onChange:this.handleChange}),Object(p.jsx)("br",{}),Object(p.jsx)("label",{children:"Pickup Slot"}),Object(p.jsx)("br",{}),Object(p.jsxs)("select",{type:"text",name:"pickupSlot",value:c,onChange:this.handleChange,children:[Object(p.jsx)("option",{}),Object(p.jsx)("option",{children:"Morning: 9am-12pm"}),Object(p.jsx)("option",{children:"Afternoon: 12pm-4pm"}),Object(p.jsx)("option",{children:"Evening: 4pm-8pm"}),Object(p.jsx)("option",{children:"Night: 8pm-11.30pm"})]}),Object(p.jsx)("br",{}),Object(p.jsx)("button",{className:"new-offer-button",children:"Submit"})]}),Object(p.jsx)(ee,{})]})}}]),n}(r.Component))),ae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).handleClick=function(){var t=Object(z.a)(W.a.mark((function t(n){var r,s;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("clicked"),r=e.props.match.params.id,t.next=4,te.acceptOffer({offerId:r});case 4:s=t.sent,A.emit("acceptOffer",{offer:s}),e.props.history.push("/provider/offers");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){return Object(p.jsx)("div",{children:Object(p.jsx)("button",{onClick:this.handleClick,children:"Accept pickup "})})}}]),n}(r.Component),ce=Object(j.g)(ae),oe=(n(142),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={offer:[]},e.deleteOneOffer=function(){var t=e.props.match.params.id;te.deleteOffer(t).then((function(){return e.props.history.push("/provider/offers")})).catch((function(e){return console.log(e)}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;te.getOneOfferProvider(t).then((function(t){console.log(t),e.setState({offer:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.offer;return Object(p.jsxs)("div",{className:"provider-oneoffer-details",children:[Object(p.jsx)("p",{children:t.content}),Object(p.jsx)("p",{children:t.quantity}),Object(p.jsxs)("p",{children:["Pickup time: ",t.pickupSlot]}),Object(p.jsxs)("p",{children:["Pickup day: ",D()(t.date).format("LL")]}),Object(p.jsxs)("p",{children:["Address: ",t.address]}),Object(p.jsxs)("p",{children:["Offer status: ",t.status]}),"new"===t.status?Object(p.jsxs)("div",{className:"buttons-conditional",children:[Object(p.jsx)(o.b,{to:"/provider/offers/edit/".concat(t._id),children:Object(p.jsx)("button",{className:"edit-provider-offer",children:"Edit"})}),Object(p.jsx)("p",{className:"one-provideroffer-delete",onClick:e.deleteOneOffer,children:"Remove offer"})]}):"requested"===t.status?Object(p.jsxs)("div",{className:"buttons-conditional",children:[Object(p.jsx)(o.b,{to:"/provider/offers/edit/".concat(t._id),children:Object(p.jsx)("button",{className:"edit-provider-offer",children:"Edit"})}),Object(p.jsx)(ce,{}),Object(p.jsx)("p",{className:"one-provideroffer-delete",onClick:e.deleteOneOffer,children:"Remove offer"})]}):"completed"===t.status?Object(p.jsx)("div",{className:"buttons-conditional",children:Object(p.jsx)("p",{className:"one-provideroffer-delete",onClick:e.deleteOneOffer,children:"Remove offer"})}):Object(p.jsx)("p",{className:"conditional-warning",children:"You cannot change this offer"}),Object(p.jsx)(ee,{})]})}}]),n}(r.Component)),ie=(n(143),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={offers:[]},e.getAllOffers=function(){te.getAllOffersProvider().then((function(t){e.setState({offers:t})})).catch((function(e){return console.log(e)}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.getAllOffers(),A.on("offerCollected",(function(){return e.getAllOffers()}))}},{key:"render",value:function(){return Object(p.jsxs)("div",{className:"offer",children:[this.state.offers.map((function(e){return Object(p.jsx)("div",{className:"provider-offer-details",children:Object(p.jsxs)("div",{children:[Object(p.jsx)("h3",{children:e.content}),Object(p.jsxs)("p",{children:[Object(p.jsx)("img",{className:"offer-icon",src:"https://res.cloudinary.com/skillbees/image/upload/v1615134623/Meal.ly/healthy-food_jf07wc.png",alt:"bowl-icon"})," ",e.quantity]}),Object(p.jsxs)("p",{children:[Object(p.jsx)("img",{className:"offer-icon",src:"https://res.cloudinary.com/skillbees/image/upload/v1615134623/Meal.ly/clock_snwysd.png",alt:"clock-icon"})," ","Pickup time: ",e.pickupSlot]}),Object(p.jsxs)("p",{children:[Object(p.jsx)("img",{className:"offer-icon",src:"https://res.cloudinary.com/skillbees/image/upload/v1615134623/Meal.ly/calendar_hhbgvr.png",alt:"calendar-icon"})," ","Pickup day: ",D()(e.date).format("LL"),";"]}),Object(p.jsxs)("p",{children:[Object(p.jsx)("img",{className:"offer-icon",src:"https://res.cloudinary.com/skillbees/image/upload/v1615134623/Meal.ly/charging-circle_p7sls6.png",alt:"status-icon"})," ","Status: ",e.status]}),Object(p.jsx)(o.b,{to:"/provider/offers/".concat(e._id),children:Object(p.jsx)("button",{className:"view-details",children:"View details"})})]},e._id)})})),Object(p.jsx)(ee,{})]})}}]),n}(r.Component)),le=w(function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={companyName:"",email:"",address:"",phoneNumber:void 0},e.handleFormSubmit=function(t){t.preventDefault();var n=e.state,r=n.companyName,s=n.email,a=n.address,c=n.phoneNumber;te.editProfile({companyName:r,email:s,address:a,phoneNumber:c}).then((function(t){e.props.updateUser(t),e.props.history.push("/provider/myprofile")}))},e.handleChange=function(t){var n=t.target,r=n.name,s=n.value;e.setState(Object(f.a)({},r,s))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;(function(){var t=Object(z.a)(W.a.mark((function t(){var n;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,te.getProfile();case 2:n=t.sent,e.setState(Object(b.a)({},n));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}},{key:"render",value:function(){var e=this.state,t=e.companyName,n=e.email,r=e.address,s=e.phoneNumber;return Object(p.jsxs)("div",{className:"edit-profile",children:[Object(p.jsx)("h2",{children:"Edit your profile"}),Object(p.jsx)("br",{}),Object(p.jsxs)("form",{onSubmit:this.handleFormSubmit,children:[Object(p.jsx)("label",{children:"Company Name"}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"text",name:"companyName",value:t,onChange:this.handleChange}),Object(p.jsx)("br",{}),Object(p.jsx)("label",{children:"Email"}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"text",name:"email",value:n,onChange:this.handleChange}),Object(p.jsx)("br",{}),Object(p.jsx)("label",{children:"Address"}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"text",name:"address",value:r,onChange:this.handleChange}),Object(p.jsx)("br",{}),Object(p.jsx)("label",{children:"Phone Number"}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"number",name:"phoneNumber",value:s,onChange:this.handleChange}),Object(p.jsx)("br",{}),Object(p.jsx)("button",{type:"submit",children:"Confirm Changes"})]})]})}}]),n}(r.Component));var ue=w((function(e){var t=e.isLoggedIn,n=e.isLoading,r=e.isProviderUser,s=e.component,a=e.exact,c=e.path;return n?"Loading":Object(p.jsx)(j.b,{exact:a,path:c,render:function(e){return t&&!r?Object(p.jsx)(j.a,{to:"/user/homepage"}):t?Object(p.jsx)(j.a,{to:"/provider/homepage"}):Object(p.jsx)(s,Object(b.a)({},e))}})}));var de=w((function(e){var t=e.isLoggedIn,n=e.isLoading,r=e.component,s=e.exact,a=e.path;return n?"Loading":Object(p.jsx)(j.b,{exact:s,path:a,render:function(e){return t?t?Object(p.jsx)(r,Object(b.a)({},e)):void 0:Object(p.jsx)(j.a,{to:"/"})}})})),je=(n(144),w(function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.logout,r=e.isLoggedIn,s=e.isProviderUser;return Object(p.jsxs)("nav",{className:"navbar",children:[Object(p.jsx)(o.b,{to:s?"/provider/homepage":"/user/homepage",id:"home-btn",children:Object(p.jsx)("img",{className:"logo",src:"https://res.cloudinary.com/skillbees/image/upload/v1615120413/Meal.ly/homelogo_dovbaf.png",alt:"home-logo"})}),r&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{children:[" Hello ",t&&s?t.companyName:t.firstName,"!"]}),Object(p.jsx)("img",{onClick:n,className:"logout",src:"https://res.cloudinary.com/skillbees/image/upload/v1615137241/Meal.ly/logout_ylpnmq.png",alt:"logout-img"})]})]})}}]),n}(r.Component))),pe=(n(145),w((function(e){var t=e.user;return Object(p.jsxs)("div",{className:"provider-profile",children:[Object(p.jsx)("h2",{children:"My Profile"}),Object(p.jsx)("img",{width:"70px",src:t.image,alt:"profile-img"}),Object(p.jsx)("p",{children:t.companyName}),Object(p.jsx)("p",{children:t.address}),Object(p.jsxs)("p",{children:["Phone: ",t.phoneNumber]}),Object(p.jsx)("p",{children:t.email}),Object(p.jsx)(o.b,{to:"/provider/myprofile/edit",children:Object(p.jsx)("button",{className:"edit-btn",children:"Edit Details"})}),Object(p.jsx)(ee,{})]})}))),he=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)(je,{}),Object(p.jsxs)(j.d,{children:[Object(p.jsx)(j.b,{exact:!0,path:"/",component:h}),Object(p.jsx)(ue,{exact:!0,path:"/signup",component:k}),Object(p.jsx)(ue,{exact:!0,path:"/login",component:S}),Object(p.jsx)(ue,{exact:!0,path:"/user/signup",component:C}),Object(p.jsx)(ue,{exact:!0,path:"/user/login",component:L}),Object(p.jsx)(de,{exact:!0,path:"/provider/homepage",component:ne}),Object(p.jsx)(de,{exact:!0,path:"/provider/offers/new",component:se}),Object(p.jsx)(de,{exact:!0,path:"/provider/offers/:id",component:oe}),Object(p.jsx)(de,{exact:!0,path:"/provider/offers/edit/:id",component:re}),Object(p.jsx)(de,{exact:!0,path:"/provider/offers",component:ie}),Object(p.jsx)(de,{exact:!0,path:"/user/homepage",component:F}),Object(p.jsx)(de,{exact:!0,path:"/user/offers",component:Q}),Object(p.jsx)(de,{exact:!0,path:"/user/offers/pending",component:X}),Object(p.jsx)(de,{exact:!0,path:"/user/offers/completed",component:Y}),Object(p.jsx)(de,{exact:!0,path:"/user/offers/:id",component:G}),Object(p.jsx)(de,{exact:!0,path:"/user/profile",component:Z}),Object(p.jsx)(de,{exact:!0,path:"/user/profile/edit",component:$}),Object(p.jsx)(de,{exact:!0,path:"/provider/myprofile",component:pe}),Object(p.jsx)(de,{exact:!0,path:"/provider/myprofile/edit",component:le})]})]})}}]),n}(r.Component);c.a.render(Object(p.jsx)(o.a,{children:Object(p.jsx)(N,{children:Object(p.jsx)(he,{})})}),document.getElementById("root"))},51:function(e,t,n){},52:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},99:function(e,t,n){}},[[146,1,2]]]);
//# sourceMappingURL=main.aaddee29.chunk.js.map